USE kalturadw;

DROP TABLE IF EXISTS `dwh_fact_api_calls`;
CREATE TABLE `dwh_fact_api_calls` (
  `file_id` INT(11) NOT NULL,
  `line_number` INT(11) NOT NULL,
  `api_call_time` DATETIME DEFAULT NULL,
  `api_call_date_id` INT(11) NOT NULL DEFAULT '0',
  `api_call_hour_id` TINYINT(4) DEFAULT NULL,
  `session_id` VARCHAR(50) NOT NULL,
  `request_index` INT(11) DEFAULT NULL,
  `partner_id` INT(11) NOT NULL,
  `action_id` INT(11) NOT NULL DEFAULT '0', 
  `os_id` INT(11) DEFAULT NULL,
  `browser_id` INT(11) DEFAULT NULL,
  `client_tag_id` INT(11) DEFAULT NULL,
  `is_admin` BOOL DEFAULT NULL,
  `pid` INT(11) DEFAULT NULL,
  `host_id` INT(11) DEFAULT NULL,
  `user_ip` VARCHAR(15) DEFAULT NULL,
  `user_ip_number` INT(10) UNSIGNED DEFAULT NULL,
  `country_id` INT(11) DEFAULT NULL,
  `location_id` INT(11) DEFAULT NULL,
  `master_partner_id` INT(11) DEFAULT NULL,
  `ks` VARCHAR(100) DEFAULT NULL,
  `kuser_id` INT(11) DEFAULT NULL,
  `is_in_multi_request` BOOL DEFAULT NULL,  
  `success` BOOL DEFAULT NULL,  
  `error_code_id` INT(11) DEFAULT NULL,
  `duration_msecs` INT(11) DEFAULT NULL,
  PRIMARY KEY (`file_id`,`line_number`,`api_call_date_id`),
  KEY (`api_call_date_id`,`api_call_hour_id`,`partner_id`)
) ENGINE=INNODB DEFAULT CHARSET=utf8
/*!50100 PARTITION BY RANGE (api_call_date_id)
(PARTITION p_20080531 VALUES LESS THAN (20080601) ENGINE = INNODB,
PARTITION p_20080630 VALUES LESS THAN (20080701) ENGINE = INNODB,
PARTITION p_20080731 VALUES LESS THAN (20080801) ENGINE = INNODB,
PARTITION p_20080831 VALUES LESS THAN (20080901) ENGINE = INNODB,
PARTITION p_20080930 VALUES LESS THAN (20081001) ENGINE = INNODB,
PARTITION p_20081031 VALUES LESS THAN (20081101) ENGINE = INNODB,
PARTITION p_20081130 VALUES LESS THAN (20081201) ENGINE = INNODB,
PARTITION p_20081231 VALUES LESS THAN (20090101) ENGINE = INNODB,
PARTITION p_20090131 VALUES LESS THAN (20090201) ENGINE = INNODB,
PARTITION p_20090228 VALUES LESS THAN (20090301) ENGINE = INNODB,
PARTITION p_20090331 VALUES LESS THAN (20090401) ENGINE = INNODB,
PARTITION p_20090430 VALUES LESS THAN (20090501) ENGINE = INNODB,
PARTITION p_20090531 VALUES LESS THAN (20090601) ENGINE = INNODB,
PARTITION p_20090630 VALUES LESS THAN (20090701) ENGINE = INNODB,
PARTITION p_20090731 VALUES LESS THAN (20090801) ENGINE = INNODB,
PARTITION p_20090831 VALUES LESS THAN (20090901) ENGINE = INNODB,
PARTITION p_20090930 VALUES LESS THAN (20091001) ENGINE = INNODB,
PARTITION p_20091031 VALUES LESS THAN (20091101) ENGINE = INNODB,
PARTITION p_20091130 VALUES LESS THAN (20091201) ENGINE = INNODB,
PARTITION p_20091231 VALUES LESS THAN (20100101) ENGINE = INNODB,
PARTITION p_20100131 VALUES LESS THAN (20100201) ENGINE = INNODB,
PARTITION p_20100228 VALUES LESS THAN (20100301) ENGINE = INNODB,
PARTITION p_20100331 VALUES LESS THAN (20100401) ENGINE = INNODB,
PARTITION p_20100430 VALUES LESS THAN (20100501) ENGINE = INNODB,
PARTITION p_20100531 VALUES LESS THAN (20100601) ENGINE = INNODB,
PARTITION p_20100630 VALUES LESS THAN (20100701) ENGINE = INNODB,
PARTITION p_20100731 VALUES LESS THAN (20100801) ENGINE = INNODB,
PARTITION p_20100831 VALUES LESS THAN (20100901) ENGINE = INNODB,
PARTITION p_20100930 VALUES LESS THAN (20101001) ENGINE = INNODB,
PARTITION p_20101031 VALUES LESS THAN (20101101) ENGINE = INNODB,
PARTITION p_20101130 VALUES LESS THAN (20101201) ENGINE = INNODB,
PARTITION p_20101231 VALUES LESS THAN (20110101) ENGINE = INNODB) */
